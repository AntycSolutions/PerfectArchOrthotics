{% extends "base.html" %}

{% load verbose_name %}

{% block title %} - Site Statistics{% endblock %}

{% include 'navbar.html' %}

{% block content %}

<!-- Wrap -->
<div class="wrap container" role="document">
    <!-- Content -->
    <div class="content row">
        <!-- Main -->
        <div class="main col-sm-12" role="main">
            {% include 'clients/snippets/messages.html' %}
            <div class="page-header">
                <h1>Site Statistics:</h1>
            </div>
            <div class="page-main">
                <h5>Outstanding Fees and Revenue</h5>
                A = Assignment,
                NA = Non-assignment,
                EB = Expected Back,
                AC = Amount Claimed
                <div class="table-responsive">
                    <table class="table table-striped table-cover">
                        <thead>
                            <tr>
                                <th>NA Outstanding Clients</th>
                                <th>A Outstanding Clients</th>
                                <th>Total Outstanding Clients</th>
                                <th>Outstanding Fees</th>
                                <th>NA Invoice Revenue</th>
                                <th>A Invoice Revenue</th>
                                <th>Invoice Revenue</th>
                                <th>EB Revenue</th>
                                <th>Total Revenue</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>{{ stats.outstanding_non_assignment_clients }}</td>
                                <td>{{ stats.outstanding_assignment_clients }}</td>
                                <td>{{ stats.total_outstanding_clients }}</td>
                                <td>{{ stats.outstanding_fees }}</td>
                                <td>{{ stats.non_assignment_invoice_revenue }}</td>
                                <td>{{ stats.assignment_invoice_revenue }}</td>
                                <td>{{ stats.invoice_revenue }}</td>
                                <td>{{ stats.expected_back_revenue }}</td>
                                <td>{{ stats.total_revenue }}</td>
                                <td>{{ stats.total }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <h5>Insurance Providers</h5>
                <form method="get">
                    <input type="text" id="dateFromSearchBox" class="input-medium search-query" name="df" placeholder="Date From" value="{{ df }}">
                    <input type="text" id="dateToSearchBox" class="input-medium search-query" name="dt" placeholder="Date To" value="{{ dt }}">
                    <script>
                        $(function() {
                            $("#dateFromSearchBox").datepicker(
                                {changeMonth: true,
                                 changeYear: true,
                                 yearRange: "1900:2015"});
                            $("#dateToSearchBox").datepicker(
                                {changeMonth: true,
                                 changeYear: true,
                                 yearRange: "1900:2015"});
                        });
                    </script>
                    <input type="submit" class="btn" value="Search">
                </form>
                <div class="table-responsive">
                    <table class="table table-striped table-cover">
                        <thead>
                            <tr>
                                <th>Provider</th>
                                <th>Claims</th>
                                <th>NA EB</th>
                                <th>A EB</th>
                                <th>Pending A EB</th>
                                <th>Total A EB</th>
                                <th>Total EB</th>
                                <th>NA Invoice Revenue</th>
                                <th>A Invoice Revenue</th>
                                <th>Total Invoice Revenue</th>
                                <th>Total Revenue</th>
                                <th>NA AC</th>
                                <th>A AC</th>
                                <th>Total AC</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for insurance in insurances %}
                                <tr>
                                    <td>{{ insurance.provider }}</a></td>
                                    <td>{{ insurance.num_claims }}</td>
                                    <td>{{ insurance.non_assignment_expected_back }}</td>
                                    <td>{{ insurance.assignment_expected_back }}</td>
                                    <td>{{ insurance.pending_assignment_expected_back }}</td>
                                    <td>{{ insurance.total_assignment_expected_back }}</td>
                                    <td></td>
                                    <td>{{ insurance.non_assignment_invoice_revenue }}</td>
                                    <td>{{ insurance.assignment_invoice_revenue }}</td>
                                    <td></td>
                                    <td></td>
                                    <td>{{ insurance.non_assignment_amount_claimed }}</td>
                                    <td>{{ insurance.assignment_amount_claimed }}</td>
                                    <td></td>
                                </tr>
                            {% endfor %}
                            <style>
                                .total {
                                    border-top: 1px solid black !important;
                                }
                            </style>
                            <tr>
                                <th class="total">Total</th>
                                <td class="total"><strong>{{ insurances_totals.num_claims }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.non_assignment_expected_back }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.assignment_expected_back }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.pending_assignment_expected_back }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.total_assignment_expected_back }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.expected_back__sum }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.non_assignment_invoice_revenue }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.assignment_invoice_revenue }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.total_invoice_revenue }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.total_revenue }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.non_assignment_amount_claimed }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.assignment_amount_claimed }}</strong></td>
                                <td class="total"><strong>{{ insurances_totals.amount_claimed__sum }}</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <h5>Top 10 Best Sellers</h5>
                <div class="table-responsive">
                    <table class="table table-striped table-cover">
                        <thead>
                            <tr>
                                <th>Shoe</th>
                                <th>Number of Orders</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for shoe in shoes %}
                                <tr>
                                    <td><a href="{{ shoe.get_absolute_url }}">{{ shoe }}</a></td>
                                    <td>{{ shoe.num_orders }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <h5>Old Ordered Date Orders</h5>
                <div class="table-responsive">
                    <table class="table table-striped table-cover">
                        <thead>
                            <tr>
                                <th>Order</th>
                                <th>Ordered Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in old_ordered_date_orders %}
                                <tr>
                                    <td><a href="{{ order.get_absolute_url }}">{{ order }}</a></td>
                                    <td>{{ order.ordered_date }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <h5>Old Arrived Date Orders</h5>
                <div class="table-responsive">
                    <table class="table table-striped table-cover">
                        <thead>
                            <tr>
                                <th>Order</th>
                                <th>Ordered Date</th>
                                <th>Arrived Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in old_arrived_date_orders %}
                                <tr>
                                    <td><a href="{{ order.get_absolute_url }}">{{ order }}</a></td>
                                    <td>{{ order.ordered_date }}</td>
                                    <td>{{ order.arrived_date }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div><!-- /.main -->
    </div><!-- /.content -->
</div><!-- /.wrap -->

{% endblock %}
