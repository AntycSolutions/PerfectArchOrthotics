{% extends 'base.html' %}

{% load verbose_name %}

{% block title %} - Add Invoice{% endblock %}

{% block extrahead %}
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script>
    $(function() {
        $( "#id_payment_date" ).datepicker(
            {changeMonth: true,
             changeYear: true,
             yearRange: "1900:2015"});
        $( "#id_deposit_date" ).datepicker(
            {changeMonth: true,
             changeYear: true,
             yearRange: "1900:2015"});
        $( "#id_invoice_date" ).datepicker(
            {changeMonth: true,
             changeYear: true,
             yearRange: "1900:2015"});
    });
</script>
{% endblock %}

{% include 'navbar.html' %}

{% block content %}

<h1>Add Invoice Information</h1>

<form id="create_invoice_form" class="form-horizontal" method="post">
    {% csrf_token %}
    <h5>Claim</h5>
    {% with totals=claim.total_amount_quantity_claimed %}
        <p>Total Amount Claimed: {{ totals.total_amount_claimed }}</p>
        <p>Total Quantity Claimed: {{ totals.total_quantity_claimed }}</p>
    {% endwith %}
    <p>Total Expected Back: {{ claim.total_expected_back }}</p>
    {% comment %}
    {% with totals=claim.total_max_expected_back_quantity %}
        <p>Total Max Expected Back: {{ totals.total_max_expected_back }}</p>
        <p>Total Max Quantity: {{ totals.total_max_quantity }}</p>
    {% endwith %}
    {% endcomment %}
    {% if claim.insurance.benefits %}
        <h5>Insurance</h5>
        <p>
            {% verbose_field_name claim.insurance "benefits" %}:
            {{ claim.insurance.get_benefits_display }}
        </p>
    {% endif %}
    <h5>Invoice</h5>
    <fieldset>
        {{ form.non_field_errors }}
        {% for hidden in form.hidden_fields %}
            {% if hidden.errors %}
                {{ hidden.errors }}
            {% endif %}
            {{ hidden }}
        {% endfor %}
        {% for field in form.visible_fields %}
            <div class="form-group">
                {% if field.errors %}
                    {{ field.errors }}
                {% endif %}
                <div class="col-lg-10">
                    {{ field.label_tag}} {{ field }}
                </div>
            </div>
        {% endfor %}
    </fieldset>
    <input type="submit" name="submit" value="Add Invoice" />
</form>
<br />

{% endblock %}
