{% extends 'base.html' %}

{% load verbose_name %}

{% block title %} - Claim for {{ claim.person.full_name }}{% endblock %}

{% include 'navbar.html' %}

{% block content %}

<h1>Claim for {{ claim.person.full_name }}</h1>
<div>
    <a href="{% url 'fillOutInvoice' client.id claim.id %}" class="btn btn-default">Generate Invoice</a>
    <a href="{% url 'fillOutInsurance' client.id claim.id %}" class="btn btn-default">Insurance Letter</a>
    {% if has_orthotics %}
        <a href="{% url 'fillOutProof' client.id claim.id %}" class="btn btn-default">Proof of Manufacturing</a>
    {% endif %}
</div>
<h5>Claim Details</h5>
<ul>
    <li>{% verbose_field_name claim "patient" %}:
        <a href="{{ claim.person.get_absolute_url }}">{{ claim.person.full_name }}</a>
    </li>
    <li>{% verbose_field_name claim "insurance" %}
        {% verbose_field_name claim.insurance "provider" %}:
        {{ claim.insurance.provider }}
    </li>
    <li>{% verbose_field_name claim "coverage_types" %}:
        <ul>
            {% for coverage_type in claim.coverage_types.all %}
                <li>{{ coverage_type.get_coverage_type_display }}<br />
                    {% verbose_field_name coverage_type "coverage_percent" %}: {{ coverage_type.coverage_percent }}
                    {% verbose_field_name coverage_type "max_claim_amount" %}:
                    {{ coverage_type.max_claim_amount }}
                    {% verbose_field_name coverage_type "total_claimed" %}:
                    {{ coverage_type.total_claimed }}
                    Coverage Remaining:
                    {{ coverage_type.coverage_remaining }}
                    {% verbose_field_name coverage_type "quantity" %}:
                    {{ coverage_type.quantity }}
                    {% verbose_field_name coverage_type "period" %}:
                    {{ coverage_type.get_period_display }}
                </li>
            {% empty %}
                <li>There are no coverage types for this claim.
                </li>
            {% endfor %}
        </ul>
    </li>
    <li>{% verbose_field_name claim "items" %}:
        <ul>
            {% for item in claim.items.all %}
                <li>{{ item.get_coverage_type_display }}
                    {{ item.get_gender_display }}
                    {{ item.product_code }}
                    {{ item.description }}
                    {{ item.unit_price }}
                </li>
            {% empty %}
                <li>There are no items for this claim.
                </li>
            {% endfor %}
        </ul>
    </li>
    <li>{% verbose_field_name claim "payment_type" %}:
        {{ claim.get_payment_type_display }}
    </li>
    <li>{% verbose_field_name claim "amount_claimed" %}:
        {{ claim.amount_claimed }}
    </li>
    <li>{% verbose_field_name claim "estimated_expected_back" %}:
        {{ claim.estimated_expected_back }}
    </li>
    <li>{% verbose_field_name claim "actual_expected_back" %}:
        {{ claim.actual_expected_back }}
    </li>
</ul>
<h5>Payment Status</h5>
<ul>
    <li>{% verbose_field_name claim "submitted_date" %}:
        {{ claim.submitted_date }}
    </li>
    <li>{% verbose_field_name claim "paid_date" %}:
        {{ claim.paid_date }}
    </li>
</ul>

{% endblock %}
