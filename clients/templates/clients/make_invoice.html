{% extends 'base.html' %}

{% load verbose_name %}

{% include 'navbar.html' %}

{% block title %} - Invoice for {{ client.full_name }}{% endblock %}

{% block content %}

<h1>Claim for
    {% if claim.patient %}
        {{ claim.patient.full_name }}
    {% else %}
        {{ client.full_name }}
    {% endif %}
</h1>
<div>
    <a href="{% url 'claim' claim.client.id claim.id %}"><button type="button" class="btn btn-info">View</button></a>
</div>
<h1>Invoice for {{ claim.client.full_name }}</h1>
<div>
    {% if invoice %}
        <a href="{% url 'invoice_update' invoice.id %}" class="btn btn-primary">Edit</a>
    {% else %}
        <a href="{% url 'invoice_create' claim.id %}" class="btn btn-primary">Create</a>
    {% endif %}
</div>
{% if invoice %}
    <h5>Please make sure the following is correct:</h5>
    <ul>
        <li>{% verbose_field_name invoice "dispensed_by" %}: {{ invoice.dispensed_by }}</li>
        <li>{% verbose_field_name invoice "payment_type" %}: {{ invoice.payment_type }}</li>
        <li>{% verbose_field_name invoice "payment_terms" %}: {{ invoice.payment_terms }}<!-- Due on reciept --></li>
        <li>Items:</li>
        <ul>
            {% for item in invoice.item_set.all %}
                <li>{% verbose_field_name item "description" %}: {{ item.description }}</li>
                <li>{% verbose_field_name item "unit_price" %}: {{ item.unit_price }}</li>
                <li>{% verbose_field_name item "quantity" %}: {{ item.quantity }}</li>
                <li>Total: {{ item.total }}</li>
            {% endfor %}
        </ul>
        <li>Total: {{ invoice.total }}</li>
        <li>{% verbose_field_name invoice "payment_made" %}: {{ invoice.payment_made }}</li>
        <li>Balance: {{ invoice.balance }}</li>
    </ul>
    <a href="{% url 'invoice' claim.client.id claim.id %}" class="btn btn-default">View Invoice</a>
{% endif %}

{% endblock %}
