{% extends 'base.html' %}

{% load verbose_name %}

{% block title %} - Invoice for {{ claim.person.full_name }}{% endblock %}

{% include 'navbar.html' %}

{% block content %}

<h1>Claim for {{ claim.person.full_name }}</h1>
<div>
    <a href="{% url 'claim' claim.client.id claim.id %}"><button type="button" class="btn btn-info">View</button></a>
</div>
<h1>Invoice for {{ claim.person.full_name }}</h1>
<div>
    {% if invoice %}
        <a href="{% url 'invoice_update' invoice.id %}" class="btn btn-primary">Edit</a>
    {% else %}
        <a href="{% url 'invoice_create' claim.id %}" class="btn btn-primary">Create</a>
    {% endif %}
</div>
{% if invoice %}
    <h5>Please make sure the following is correct:</h5>
    <ul>
        <li>Invoice #:
            {{ invoice_number }}
        </li>
        <li>Invoice Date:
            {{ invoice.invoice_date }}
        <li>{% verbose_field_name invoice "dispensed_by" %}:
            {{ invoice.dispensed_by }}
        </li>
        <li>{% verbose_field_name insurance_class "benefits" %}:
            {{ claim.insurance.get_benefits_display }}
        </li>
        <li>{% verbose_field_name invoice "payment_terms" %}:
            {{ invoice.get_payment_terms_display }}
        </li>
        <li>Items:</li>
        <ul>
            {% for item in invoice.item_set.all %}
                <li>{% verbose_field_name item "description" %}:
                    {{ item.description }}</li>
                <li>{% verbose_field_name item "unit_price" %}:
                    {{ item.unit_price }}</li>
                <li>{% verbose_field_name item "quantity" %}:
                    {{ item.quantity }}</li>
                <li>Total:
                    {{ item.total }}</li>
            {% endfor %}
        </ul>
        <li>Total:
            {{ invoice.total }}</li>
        <li>{% verbose_field_name invoice "payment_made" %}:
            {{ invoice.payment_made }}</li>
        <li>Balance:
            {{ invoice.balance }}</li>
    </ul>
    <strong>{{ invoice.estimate|yesno:"ESTIMATE:," }}</strong>
    <a href="{% url 'invoice' claim.client.id claim.id %}" class="btn btn-default">View Invoice</a>
{% endif %}

{% endblock %}
